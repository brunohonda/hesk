var HESK_FUNCTIONS;HESK_FUNCTIONS||(HESK_FUNCTIONS={});var heskKBfailed=!1,heskKBquery="";function outputAttachmentIdHolder(e,t){$("#attachment-holder-"+t).append('<input type="hidden" name="attachments[]" value="'+e+'">')}function removeAttachment(e,t,n){var a=n?"../":"";$('input[name="attachments[]"][value="'+t+'"]').remove(),$.ajax({url:a+"upload_attachment.php?action=delete&fileKey="+encodeURIComponent(t),method:"GET"})}HESK_FUNCTIONS.getKbSearchSuggestions=function(e,t){document.form1;var n=e.val();if(""!==n&&(heskKBquery!==n||!0===heskKBfailed)){var a="q="+encodeURIComponent(n);heskKBquery=n,$.ajax({url:"suggest_articles.php",method:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded",data:a,success:function(e){heskKBfailed=!1,t(e)},error:function(e,t,n){heskKBfailed=!0}})}setTimeout((function(){HESK_FUNCTIONS.getKbSearchSuggestions(e,t)}),2e3)},HESK_FUNCTIONS.getKbTicketSuggestions=function(e,t,n){document.form1;var a=e.val(),o=t.val(),s=a+" "+o;if(""!==a&&""!==o&&(heskKBquery!==s||!0===heskKBfailed)){var i="q="+encodeURIComponent(s);heskKBquery=s,$.ajax({url:"suggest_articles.php",method:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded",data:i,success:function(e){heskKBfailed=!1,n(e)},error:function(e,t,n){heskKBfailed=!0}})}setTimeout((function(){HESK_FUNCTIONS.getKbTicketSuggestions(e,t,n)}),2e3)},HESK_FUNCTIONS.openWindow=function(e,t,n){window.open(e,"Hesk_window","height="+t+",width="+n+",menubar=0,location=0,toolbar=0,status=0,resizable=1,scrollbars=1").focus()},HESK_FUNCTIONS.suggestEmail=function(e,t,n,a){var o=document.getElementById(e).value,s=(document.getElementById(t),n?"../suggest_email.php":"suggest_email.php");if(""!==o){var i="e="+encodeURIComponent(o)+"&ef="+encodeURIComponent(e)+"&dd="+encodeURIComponent(t);a&&(i+="&am=1");var u='<div class="alert warning" id="{0}" style="display: block"><div class="alert__inner"><p><p>{1}</p><a class="link" href="javascript:" onclick="HESK_FUNCTIONS.applyEmailSuggestion(\'{0}\', \''+e+"', '{2}', '{3}')\">{4}</a> | <a class=\"link\" href=\"javascript:void(0);\" onclick=\"document.getElementById('{0}').style.display='none';\">{5}</a></p></div></div>";$.ajax({url:s,method:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded",data:i,success:function(e){var n=$("#"+t);n.html(""),e.length?n.show():n.hide(),$.each(e,(function(){n.append(u.replace(/\{0}/g,this.id).replace(/\{1}/g,this.suggestText).replace(/\{2}/g,this.originalAddress).replace(/\{3}/g,this.formattedSuggestedEmail).replace(/\{4}/g,this.yesResponseText).replace(/\{5}/g,this.noResponseText))}))},error:function(e,t,n){}})}},HESK_FUNCTIONS.applyEmailSuggestion=function(e,t,n,a){var o=document.getElementById(t).value,s=new RegExp(n,"gi");document.getElementById(t).value=o.replace(s,a),document.getElementById(e).style.display="none"},HESK_FUNCTIONS.rate=function(e,t){if(0===e.length)return!1;var n=document.getElementById(t);$.ajax({url:e,method:"GET",dataType:"text",success:function(e){n.innerHTML=e},error:function(e,t,n){}})},HESK_FUNCTIONS.checkPasswordStrength=function(e,t="progressBar"){var n="!.@$#*()%~<>{}[]",a=0,o=0;HESK_FUNCTIONS._contains(e,"0123456789")>0&&(a+=10,o+=25),HESK_FUNCTIONS._contains(e,"abcdefghijklmnopqrstuvwxyz")>0&&(a+=26,o+=25),HESK_FUNCTIONS._contains(e,"ABCDEFGHIJKLMNOPQRSTUVWXYZ")>0&&(a+=26,o+=25),HESK_FUNCTIONS._contains(e,n)>0&&(a+=n.length,o+=25);var s=Math.pow(a,e.length)/200/2/86400/365e3,i=Math.min(Math.round(100*s),o);i<5*e.length&&(i+=5*e.length),i=Math.min(i,o);var u=document.getElementById(t);u.style.width=i+"%",s>1&&i>75?u.style.backgroundColor="#3bce08":s>.5&&i>50?u.style.backgroundColor="#ffd801":s>.1&&i>10?u.style.backgroundColor="orange":(s<=.1||i<=10)&&(u.style.backgroundColor="red")},HESK_FUNCTIONS._contains=function(e,t){for(count=0,i=0;i<e.length;i++){var n=e.charAt(i);t.indexOf(n)>-1&&count++}return count},HESK_FUNCTIONS.toggleLayerDisplay=function(e,t="block"){document.getElementById(e).style.display="none"===document.getElementById(e).style.display?t:"none"},"undefined"==typeof originalSubmitText&&(originalSubmitText=$('button[type="submit"]').text());let attachmentQueueDelayedTimeout=null;function attachmentQueueComplete(){clearTimeout(attachmentQueueDelayedTimeout),$('button[type="submit"]').attr("disabled",!1).text(originalSubmitText)}function attachmentQueueProcessing(){originalSubmitText=$('button[type="submit"]').text(),$('button[type="submit"]').attr("disabled",!0),clearTimeout(attachmentQueueDelayedTimeout),attachmentQueueDelayedTimeout=setTimeout(setPleaseWaitText,1e3)}function attachmentError(){attachmentQueueComplete()}function setPleaseWaitText(){$('button[type="submit"]').text(pleaseWaitMessage)}function hesk_showLoadingMessage(e){document.getElementById("loading-overlay").style.display="block",document.getElementById(e).disabled=!0}function hesk_loadNoResultsSelectizePlugin(e){Selectize.define("no_results",(function(t){var n,a=this;t=$.extend({message:e,html:function(e){return'<div class="selectize-dropdown '+e.classNames+'"><div class="selectize-dropdown-content"><div class="no-results">'+e.message+"</div></div></div>"}},t),a.displayEmptyResultsMessage=function(){this.$empty_results_container.css("top",this.$control.outerHeight()),this.$empty_results_container.css("width",this.$control.outerWidth()),this.$empty_results_container.show(),this.$control.addClass("dropdown-active")},a.refreshOptions=(n=a.refreshOptions,function(){n.apply(a,arguments),this.hasOptions||!this.lastQuery?this.$empty_results_container.hide():this.displayEmptyResultsMessage()}),a.onKeyDown=function(){var e=a.onKeyDown;return function(t){e.apply(a,arguments),27===t.keyCode&&this.$empty_results_container.hide()}}(),a.onBlur=function(){var e=a.onBlur;return function(){e.apply(a,arguments),this.$empty_results_container.hide(),this.$control.removeClass("dropdown-active")}}(),a.setup=function(){var e=a.setup;return function(){e.apply(a,arguments),a.$empty_results_container=$(t.html($.extend({classNames:a.$input.attr("class")},t))),a.$empty_results_container.insertBefore(a.$dropdown),a.$empty_results_container.hide()}}()}))}"undefined"==typeof pleaseWaitMessage&&(pleaseWaitMessage="Please Wait..."),jQuery.fn.preventDoubleSubmission=function(){return $(this).on("submit",(function(e){var t=$(this);!0===t.data("submitted")?e.preventDefault():t.data("submitted",!0)})),this};